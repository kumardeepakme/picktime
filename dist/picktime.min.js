const t=Math.min,e=Math.max,i=Math.round,n=Math.floor,r=t=>({x:t,y:t}),o={left:"right",right:"left",bottom:"top",top:"bottom"},s={start:"end",end:"start"};function l(i,n,r){return e(i,t(n,r))}function a(t,e){return"function"==typeof t?t(e):t}function c(t){return t.split("-")[0]}function u(t){return t.split("-")[1]}function m(t){return"x"===t?"y":"x"}function h(t){return"y"===t?"height":"width"}const p=new Set(["top","bottom"]);function f(t){return p.has(c(t))?"y":"x"}function d(t){return m(f(t))}function w(t){return t.replace(/start|end/g,(t=>s[t]))}const y=["left","right"],g=["right","left"],b=["top","bottom"],v=["bottom","top"];function x(t,e,i,n){const r=u(t);let o=function(t,e,i){switch(t){case"top":case"bottom":return i?e?g:y:e?y:g;case"left":case"right":return e?b:v;default:return[]}}(c(t),"start"===i,n);return r&&(o=o.map((t=>t+"-"+r)),e&&(o=o.concat(o.map(w)))),o}function k(t){return t.replace(/left|right|bottom|top/g,(t=>o[t]))}function E(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function S(t){const{x:e,y:i,width:n,height:r}=t;return{width:n,height:r,top:i,left:e,right:e+n,bottom:i+r,x:e,y:i}}function T(t,e,i){let{reference:n,floating:r}=t;const o=f(e),s=d(e),l=h(s),a=c(e),m="y"===o,p=n.x+n.width/2-r.width/2,w=n.y+n.height/2-r.height/2,y=n[l]/2-r[l]/2;let g;switch(a){case"top":g={x:p,y:n.y-r.height};break;case"bottom":g={x:p,y:n.y+n.height};break;case"right":g={x:n.x+n.width,y:w};break;case"left":g={x:n.x-r.width,y:w};break;default:g={x:n.x,y:n.y}}switch(u(e)){case"start":g[s]-=y*(i&&m?-1:1);break;case"end":g[s]+=y*(i&&m?-1:1)}return g}async function L(t,e){var i;void 0===e&&(e={});const{x:n,y:r,platform:o,rects:s,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:m="viewport",elementContext:h="floating",altBoundary:p=!1,padding:f=0}=a(e,t),d=E(f),w=l[p?"floating"===h?"reference":"floating":h],y=S(await o.getClippingRect({element:null==(i=await(null==o.isElement?void 0:o.isElement(w)))||i?w:w.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:m,strategy:c})),g="floating"===h?{x:n,y:r,width:s.floating.width,height:s.floating.height}:s.reference,b=await(null==o.getOffsetParent?void 0:o.getOffsetParent(l.floating)),v=await(null==o.isElement?void 0:o.isElement(b))&&await(null==o.getScale?void 0:o.getScale(b))||{x:1,y:1},x=S(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:g,offsetParent:b,strategy:c}):g);return{top:(y.top-x.top+d.top)/v.y,bottom:(x.bottom-y.bottom+d.bottom)/v.y,left:(y.left-x.left+d.left)/v.x,right:(x.right-y.right+d.right)/v.x}}const A=new Set(["left","top"]);function R(){return"undefined"!=typeof window}function D(t){return C(t)?(t.nodeName||"").toLowerCase():"#document"}function P(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function M(t){var e;return null==(e=(C(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function C(t){return!!R()&&(t instanceof Node||t instanceof P(t).Node)}function O(t){return!!R()&&(t instanceof Element||t instanceof P(t).Element)}function H(t){return!!R()&&(t instanceof HTMLElement||t instanceof P(t).HTMLElement)}function $(t){return!(!R()||"undefined"==typeof ShadowRoot)&&(t instanceof ShadowRoot||t instanceof P(t).ShadowRoot)}const I=new Set(["inline","contents"]);function F(t){const{overflow:e,overflowX:i,overflowY:n,display:r}=X(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+i)&&!I.has(r)}const W=new Set(["table","td","th"]);function N(t){return W.has(D(t))}const _=[":popover-open",":modal"];function K(t){return _.some((e=>{try{return t.matches(e)}catch(t){return!1}}))}const q=["transform","translate","scale","rotate","perspective"],B=["transform","translate","scale","rotate","perspective","filter"],z=["paint","layout","strict","content"];function V(t){const e=j(),i=O(t)?X(t):t;return q.some((t=>!!i[t]&&"none"!==i[t]))||!!i.containerType&&"normal"!==i.containerType||!e&&!!i.backdropFilter&&"none"!==i.backdropFilter||!e&&!!i.filter&&"none"!==i.filter||B.some((t=>(i.willChange||"").includes(t)))||z.some((t=>(i.contain||"").includes(t)))}function j(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const U=new Set(["html","body","#document"]);function Y(t){return U.has(D(t))}function X(t){return P(t).getComputedStyle(t)}function G(t){return O(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function J(t){if("html"===D(t))return t;const e=t.assignedSlot||t.parentNode||$(t)&&t.host||M(t);return $(e)?e.host:e}function Q(t){const e=J(t);return Y(e)?t.ownerDocument?t.ownerDocument.body:t.body:H(e)&&F(e)?e:Q(e)}function Z(t,e,i){var n;void 0===e&&(e=[]),void 0===i&&(i=!0);const r=Q(t),o=r===(null==(n=t.ownerDocument)?void 0:n.body),s=P(r);if(o){const t=tt(s);return e.concat(s,s.visualViewport||[],F(r)?r:[],t&&i?Z(t):[])}return e.concat(r,Z(r,[],i))}function tt(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function et(t){const e=X(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=H(t),s=o?t.offsetWidth:n,l=o?t.offsetHeight:r,a=i(n)!==s||i(r)!==l;return a&&(n=s,r=l),{width:n,height:r,$:a}}function it(t){return O(t)?t:t.contextElement}function nt(t){const e=it(t);if(!H(e))return r(1);const n=e.getBoundingClientRect(),{width:o,height:s,$:l}=et(e);let a=(l?i(n.width):n.width)/o,c=(l?i(n.height):n.height)/s;return a&&Number.isFinite(a)||(a=1),c&&Number.isFinite(c)||(c=1),{x:a,y:c}}const rt=r(0);function ot(t){const e=P(t);return j()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:rt}function st(t,e,i,n){void 0===e&&(e=!1),void 0===i&&(i=!1);const o=t.getBoundingClientRect(),s=it(t);let l=r(1);e&&(n?O(n)&&(l=nt(n)):l=nt(t));const a=function(t,e,i){return void 0===e&&(e=!1),!(!i||e&&i!==P(t))&&e}(s,i,n)?ot(s):r(0);let c=(o.left+a.x)/l.x,u=(o.top+a.y)/l.y,m=o.width/l.x,h=o.height/l.y;if(s){const t=P(s),e=n&&O(n)?P(n):n;let i=t,r=tt(i);for(;r&&n&&e!==i;){const t=nt(r),e=r.getBoundingClientRect(),n=X(r),o=e.left+(r.clientLeft+parseFloat(n.paddingLeft))*t.x,s=e.top+(r.clientTop+parseFloat(n.paddingTop))*t.y;c*=t.x,u*=t.y,m*=t.x,h*=t.y,c+=o,u+=s,i=P(r),r=tt(i)}}return S({width:m,height:h,x:c,y:u})}function lt(t,e){const i=G(t).scrollLeft;return e?e.left+i:st(M(t)).left+i}function at(t,e,i){void 0===i&&(i=!1);const n=t.getBoundingClientRect();return{x:n.left+e.scrollLeft-(i?0:lt(t,n)),y:n.top+e.scrollTop}}const ct=new Set(["absolute","fixed"]);function ut(t,i,n){let o;if("viewport"===i)o=function(t,e){const i=P(t),n=M(t),r=i.visualViewport;let o=n.clientWidth,s=n.clientHeight,l=0,a=0;if(r){o=r.width,s=r.height;const t=j();(!t||t&&"fixed"===e)&&(l=r.offsetLeft,a=r.offsetTop)}return{width:o,height:s,x:l,y:a}}(t,n);else if("document"===i)o=function(t){const i=M(t),n=G(t),r=t.ownerDocument.body,o=e(i.scrollWidth,i.clientWidth,r.scrollWidth,r.clientWidth),s=e(i.scrollHeight,i.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+lt(t);const a=-n.scrollTop;return"rtl"===X(r).direction&&(l+=e(i.clientWidth,r.clientWidth)-o),{width:o,height:s,x:l,y:a}}(M(t));else if(O(i))o=function(t,e){const i=st(t,!0,"fixed"===e),n=i.top+t.clientTop,o=i.left+t.clientLeft,s=H(t)?nt(t):r(1);return{width:t.clientWidth*s.x,height:t.clientHeight*s.y,x:o*s.x,y:n*s.y}}(i,n);else{const e=ot(t);o={x:i.x-e.x,y:i.y-e.y,width:i.width,height:i.height}}return S(o)}function mt(t,e){const i=J(t);return!(i===e||!O(i)||Y(i))&&("fixed"===X(i).position||mt(i,e))}function ht(t,e,i){const n=H(e),o=M(e),s="fixed"===i,l=st(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const c=r(0);function u(){c.x=lt(o)}if(n||!n&&!s)if(("body"!==D(e)||F(o))&&(a=G(e)),n){const t=st(e,!0,s,e);c.x=t.x+e.clientLeft,c.y=t.y+e.clientTop}else o&&u();s&&!n&&o&&u();const m=!o||n||s?r(0):at(o,a);return{x:l.left+a.scrollLeft-c.x-m.x,y:l.top+a.scrollTop-c.y-m.y,width:l.width,height:l.height}}function pt(t){return"static"===X(t).position}function ft(t,e){if(!H(t)||"fixed"===X(t).position)return null;if(e)return e(t);let i=t.offsetParent;return M(t)===i&&(i=i.ownerDocument.body),i}function dt(t,e){const i=P(t);if(K(t))return i;if(!H(t)){let e=J(t);for(;e&&!Y(e);){if(O(e)&&!pt(e))return e;e=J(e)}return i}let n=ft(t,e);for(;n&&N(n)&&pt(n);)n=ft(n,e);return n&&Y(n)&&pt(n)&&!V(n)?i:n||function(t){let e=J(t);for(;H(e)&&!Y(e);){if(V(e))return e;if(K(e))return null;e=J(e)}return null}(t)||i}const wt={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:e,rect:i,offsetParent:n,strategy:o}=t;const s="fixed"===o,l=M(n),a=!!e&&K(e.floating);if(n===l||a&&s)return i;let c={scrollLeft:0,scrollTop:0},u=r(1);const m=r(0),h=H(n);if((h||!h&&!s)&&(("body"!==D(n)||F(l))&&(c=G(n)),H(n))){const t=st(n);u=nt(n),m.x=t.x+n.clientLeft,m.y=t.y+n.clientTop}const p=!l||h||s?r(0):at(l,c,!0);return{width:i.width*u.x,height:i.height*u.y,x:i.x*u.x-c.scrollLeft*u.x+m.x+p.x,y:i.y*u.y-c.scrollTop*u.y+m.y+p.y}},getDocumentElement:M,getClippingRect:function(i){let{element:n,boundary:r,rootBoundary:o,strategy:s}=i;const l=[..."clippingAncestors"===r?K(n)?[]:function(t,e){const i=e.get(t);if(i)return i;let n=Z(t,[],!1).filter((t=>O(t)&&"body"!==D(t))),r=null;const o="fixed"===X(t).position;let s=o?J(t):t;for(;O(s)&&!Y(s);){const e=X(s),i=V(s);i||"fixed"!==e.position||(r=null),(o?!i&&!r:!i&&"static"===e.position&&r&&ct.has(r.position)||F(s)&&!i&&mt(t,s))?n=n.filter((t=>t!==s)):r=e,s=J(s)}return e.set(t,n),n}(n,this._c):[].concat(r),o],a=l[0],c=l.reduce(((i,r)=>{const o=ut(n,r,s);return i.top=e(o.top,i.top),i.right=t(o.right,i.right),i.bottom=t(o.bottom,i.bottom),i.left=e(o.left,i.left),i}),ut(n,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},getOffsetParent:dt,getElementRects:async function(t){const e=this.getOffsetParent||dt,i=this.getDimensions,n=await i(t.floating);return{reference:ht(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){const{width:e,height:i}=et(t);return{width:e,height:i}},getScale:nt,isElement:O,isRTL:function(t){return"rtl"===X(t).direction}};function yt(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function gt(i,r,o,s){void 0===s&&(s={});const{ancestorScroll:l=!0,ancestorResize:a=!0,elementResize:c="function"==typeof ResizeObserver,layoutShift:u="function"==typeof IntersectionObserver,animationFrame:m=!1}=s,h=it(i),p=l||a?[...h?Z(h):[],...Z(r)]:[];p.forEach((t=>{l&&t.addEventListener("scroll",o,{passive:!0}),a&&t.addEventListener("resize",o)}));const f=h&&u?function(i,r){let o,s=null;const l=M(i);function a(){var t;clearTimeout(o),null==(t=s)||t.disconnect(),s=null}return function c(u,m){void 0===u&&(u=!1),void 0===m&&(m=1),a();const h=i.getBoundingClientRect(),{left:p,top:f,width:d,height:w}=h;if(u||r(),!d||!w)return;const y={rootMargin:-n(f)+"px "+-n(l.clientWidth-(p+d))+"px "+-n(l.clientHeight-(f+w))+"px "+-n(p)+"px",threshold:e(0,t(1,m))||1};let g=!0;function b(t){const e=t[0].intersectionRatio;if(e!==m){if(!g)return c();e?c(!1,e):o=setTimeout((()=>{c(!1,1e-7)}),1e3)}1!==e||yt(h,i.getBoundingClientRect())||c(),g=!1}try{s=new IntersectionObserver(b,{...y,root:l.ownerDocument})}catch(t){s=new IntersectionObserver(b,y)}s.observe(i)}(!0),a}(h,o):null;let d,w=-1,y=null;c&&(y=new ResizeObserver((t=>{let[e]=t;e&&e.target===h&&y&&(y.unobserve(r),cancelAnimationFrame(w),w=requestAnimationFrame((()=>{var t;null==(t=y)||t.observe(r)}))),o()})),h&&!m&&y.observe(h),y.observe(r));let g=m?st(i):null;return m&&function t(){const e=st(i);g&&!yt(g,e)&&o();g=e,d=requestAnimationFrame(t)}(),o(),()=>{var t;p.forEach((t=>{l&&t.removeEventListener("scroll",o),a&&t.removeEventListener("resize",o)})),null==f||f(),null==(t=y)||t.disconnect(),y=null,m&&cancelAnimationFrame(d)}}const bt=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(e){var i,n;const{x:r,y:o,placement:s,middlewareData:l}=e,m=await async function(t,e){const{placement:i,platform:n,elements:r}=t,o=await(null==n.isRTL?void 0:n.isRTL(r.floating)),s=c(i),l=u(i),m="y"===f(i),h=A.has(s)?-1:1,p=o&&m?-1:1,d=a(e,t);let{mainAxis:w,crossAxis:y,alignmentAxis:g}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return l&&"number"==typeof g&&(y="end"===l?-1*g:g),m?{x:y*p,y:w*h}:{x:w*h,y:y*p}}(e,t);return s===(null==(i=l.offset)?void 0:i.placement)&&null!=(n=l.arrow)&&n.alignmentOffset?{}:{x:r+m.x,y:o+m.y,data:{...m,placement:s}}}}},vt=function(t){return void 0===t&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:n,placement:r}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:u={fn:t=>{let{x:e,y:i}=t;return{x:e,y:i}}},...h}=a(t,e),p={x:i,y:n},d=await L(e,h),w=f(c(r)),y=m(w);let g=p[y],b=p[w];if(o){const t="y"===y?"bottom":"right";g=l(g+d["y"===y?"top":"left"],g,g-d[t])}if(s){const t="y"===w?"bottom":"right";b=l(b+d["y"===w?"top":"left"],b,b-d[t])}const v=u.fn({...e,[y]:g,[w]:b});return{...v,data:{x:v.x-i,y:v.y-n,enabled:{[y]:o,[w]:s}}}}}},xt=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(e){var i,n;const{placement:r,middlewareData:o,rects:s,initialPlacement:l,platform:m,elements:p}=e,{mainAxis:y=!0,crossAxis:g=!0,fallbackPlacements:b,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:S=!0,...T}=a(t,e);if(null!=(i=o.arrow)&&i.alignmentOffset)return{};const A=c(r),R=f(l),D=c(l)===l,P=await(null==m.isRTL?void 0:m.isRTL(p.floating)),M=b||(D||!S?[k(l)]:function(t){const e=k(t);return[w(t),e,w(e)]}(l)),C="none"!==E;!b&&C&&M.push(...x(l,S,E,P));const O=[l,...M],H=await L(e,T),$=[];let I=(null==(n=o.flip)?void 0:n.overflows)||[];if(y&&$.push(H[A]),g){const t=function(t,e,i){void 0===i&&(i=!1);const n=u(t),r=d(t),o=h(r);let s="x"===r?n===(i?"end":"start")?"right":"left":"start"===n?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=k(s)),[s,k(s)]}(r,s,P);$.push(H[t[0]],H[t[1]])}if(I=[...I,{placement:r,overflows:$}],!$.every((t=>t<=0))){var F,W;const t=((null==(F=o.flip)?void 0:F.index)||0)+1,e=O[t];if(e){if(!("alignment"===g&&R!==f(e))||I.every((t=>f(t.placement)!==R||t.overflows[0]>0)))return{data:{index:t,overflows:I},reset:{placement:e}}}let i=null==(W=I.filter((t=>t.overflows[0]<=0)).sort(((t,e)=>t.overflows[1]-e.overflows[1]))[0])?void 0:W.placement;if(!i)switch(v){case"bestFit":{var N;const t=null==(N=I.filter((t=>{if(C){const e=f(t.placement);return e===R||"y"===e}return!0})).map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)])).sort(((t,e)=>t[1]-e[1]))[0])?void 0:N[0];t&&(i=t);break}case"initialPlacement":i=l}if(r!==i)return{reset:{placement:i}}}return{}}}},kt=e=>({name:"arrow",options:e,async fn(i){const{x:n,y:r,placement:o,rects:s,platform:c,elements:m,middlewareData:p}=i,{element:f,padding:w=0}=a(e,i)||{};if(null==f)return{};const y=E(w),g={x:n,y:r},b=d(o),v=h(b),x=await c.getDimensions(f),k="y"===b,S=k?"top":"left",T=k?"bottom":"right",L=k?"clientHeight":"clientWidth",A=s.reference[v]+s.reference[b]-g[b]-s.floating[v],R=g[b]-s.reference[b],D=await(null==c.getOffsetParent?void 0:c.getOffsetParent(f));let P=D?D[L]:0;P&&await(null==c.isElement?void 0:c.isElement(D))||(P=m.floating[L]||s.floating[v]);const M=A/2-R/2,C=P/2-x[v]/2-1,O=t(y[S],C),H=t(y[T],C),$=O,I=P-x[v]-H,F=P/2-x[v]/2+M,W=l($,F,I),N=!p.arrow&&null!=u(o)&&F!==W&&s.reference[v]/2-(F<$?O:H)-x[v]/2<0,_=N?F<$?F-$:F-I:0;return{[b]:g[b]+_,data:{[b]:W,centerOffset:F-W-_,...N&&{alignmentOffset:_}},reset:N}}}),Et=(t,e,i)=>{const n=new Map,r={platform:wt,...i},o={...r.platform,_c:n};return(async(t,e,i)=>{const{placement:n="bottom",strategy:r="absolute",middleware:o=[],platform:s}=i,l=o.filter(Boolean),a=await(null==s.isRTL?void 0:s.isRTL(e));let c=await s.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:m}=T(c,n,a),h=n,p={},f=0;for(let i=0;i<l.length;i++){const{name:o,fn:d}=l[i],{x:w,y:y,data:g,reset:b}=await d({x:u,y:m,initialPlacement:n,placement:h,strategy:r,middlewareData:p,rects:c,platform:s,elements:{reference:t,floating:e}});u=null!=w?w:u,m=null!=y?y:m,p={...p,[o]:{...p[o],...g}},b&&f<=50&&(f++,"object"==typeof b&&(b.placement&&(h=b.placement),b.rects&&(c=!0===b.rects?await s.getElementRects({reference:t,floating:e,strategy:r}):b.rects),({x:u,y:m}=T(c,h,a))),i=-1)}return{x:u,y:m,placement:h,strategy:r,middlewareData:p}})(t,e,{...r,platform:o})};class St{#t;#e;#i;#n;constructor(t,e,i){this.#t=t,this.#e=e,this.#i=i,this.#r(this.#e,this.#i)}#r(t,e){const i=document.createElement("div");i.setAttribute("tabindex","-1"),i.dataset.picker=`picktime${e}`,i.classList.add("picktime",`picktime--theme-${t.theme}`,`picktime--animation-${t.animation}`,`picktime--clock-${t.clock}`),i.innerHTML=`<div class="picktime--body">\n      <input class="picktime--input" type="text" name="pickerHours" maxlength="2" tabindex="1" readonly>\n      <div class="picktime--dots"></div>\n      <input class="picktime--input" type="text" name="pickerMinutes" maxlength="2" tabindex="2" readonly>\n      ${this.#o?this.#s():""}\n    </div>`;const n=this.#l();this.#a&&i.appendChild(n),document.body.appendChild(i),this.#n=i}position(){const t=this.#e.offset?.left||0,e=this.#e.offset?.top||0,i=this.#n.querySelector(".picktime--arrow");gt(this.#t,this.#n,(()=>{i&&(i.classList.remove("picktime--arrow-top"),i.classList.remove("picktime--arrow-bottom")),Et(this.#t,this.#n,{placement:"bottom-start",middleware:[bt({crossAxis:t,mainAxis:e}),xt(),vt({padding:5}),this.#a&&i&&kt({element:i})]}).then((({x:t,y:e,placement:n,middlewareData:r})=>{if(Object.assign(this.#n.style,{left:`${t}px`,top:`${e}px`}),this.#a&&i){const{y:t}=r.arrow,e={top:"bottom",right:"left",bottom:"top",left:"right"}[n.split("-")[0]];i&&i.classList.add(`picktime--arrow-${e}`),Object.assign(i.style,{left:"15px",top:null!=t?`${t}px`:"",right:"",bottom:"",[e]:"-6px"})}}))}))}#s(){return`<div class="picktime__meridiem">\n      <label class="picktime__meridiem--switch" tabindex="3" data-tabindex="3">\n        <input class="picktime__meridiem--radio" type="radio" name="pickerMeridiem${this.#i}" value="am">\n        <div class="picktime__meridiem--label"><span>AM</span></div>\n      </label>\n      <label class="picktime__meridiem--switch" tabindex="4" data-tabindex="4">\n        <input class="picktime__meridiem--radio" type="radio" name="pickerMeridiem${this.#i}" value="pm">\n        <div class="picktime__meridiem--label"><span>PM</span></div>\n      </label>\n    </div>`}#l(){const t=document.createElement("div");return t.className="picktime--arrow",t.innerHTML='<svg width="16" height="6" xmlns="http://www.w3.org/2000/svg"><path d="M0 6s1.796-.013 4.67-3.615C5.851.9 6.93.006 8 0s2.148.887 3.343 2.385C14.233 6.005 16 6 16 6z"/></svg><svg width="16" height="6" xmlns="http://www.w3.org/2000/svg"><path d="M0 6s1.796-.013 4.67-3.615C5.851.9 6.93.006 8 0s2.148.887 3.343 2.385C14.233 6.005 16 6 16 6z"/></svg>',t}get#o(){return 12===this.#e.clock}get#a(){return this.#e.arrow}get picker(){return this.#n}}class Tt{#n;#i;#c;constructor(t,e,i,n){this.inputEl=t,this.clock=e.clock||12,this.hours=e.time.hours||12,this.minutes=e.time.minutes||0,this.meridiem=e.time.meridiem||"am",this.minuteSteps=e.minuteSteps||1,this.isUpDownKeys=e.upDownKeys||!1,this.isWheelSpin=e.wheelSpin||!1,this.#n=i,this.#i=n,this.hoursInputEl=this.#n.querySelector("input[name=pickerHours]"),this.minutesInputEl=this.#n.querySelector("input[name=pickerMinutes]"),this.meridiemInputEls=this.#n.querySelectorAll(`input[name=pickerMeridiem${this.#i}]`),this.meridiemInputEls.forEach((t=>{t.addEventListener("click",this.handleMeridiemClick),t.parentElement.addEventListener("keydown",this.handleMeridiemKeyDown)})),this.setTime({hours:this.hours,minutes:this.minutes,meridiem:this.meridiem}),this.#u(),this.#m()}setTime({hours:t,minutes:e,meridiem:i}){if(this.hours=Math.abs(t),this.minutes=Math.abs(e),24===this.clock)this.hours>23&&(this.hours=23),60===this.minutes&&(this.minutes=0),this.meridiem=null;else this.hours>12&&(this.hours=12),60===this.minutes&&(this.minutes=0),this.meridiem="am"!==i.toLowerCase()&&"pm"!==i.toLowerCase()?this.meridiem:i.toLowerCase();this.hoursInputEl.value=String(this.hours).padStart(2,"0"),this.minutesInputEl.value=String(this.minutes).padStart(2,"0"),12===this.clock&&this.meridiemInputEls.forEach((t=>{t.value.toLowerCase()===this.meridiem.toLowerCase()&&(t.checked=!0)}));const n=12===this.clock?`${String(this.hours).padStart(2,"0")}:${String(this.minutes).padStart(2,"0")} ${this.meridiem.toUpperCase()}`:`${String(this.hours).padStart(2,"0")}:${String(this.minutes).padStart(2,"0")}`;this.inputEl.value=n,this.#c={displayTime:n,meridiem:12===this.clock?this.meridiem:null,time:`${String(this.hours).padStart(2,"0")}:${String(this.minutes).padStart(2,"0")}`,utcOffset:this.#h()},this.inputEl.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))}#u(){[this.hoursInputEl,this.minutesInputEl].forEach((t=>t.addEventListener("keydown",(e=>{"Tab"!==e.key&&e.preventDefault(),this.isUpDownKeys&&("ArrowUp"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),t.focus(),"pickerHours"===t.name?this.#p("ArrowUp"===e.key,"ArrowDown"===e.key):this.#f("ArrowUp"===e.key,"ArrowDown"===e.key)))}))))}handleMeridiemClick=t=>{this.meridiem=t.target.value.toLowerCase(),this.setTime({hours:this.hours,minutes:this.minutes,meridiem:this.meridiem})};handleMeridiemKeyDown=t=>{"Tab"!==t.key&&t.preventDefault(),"Space"!==t.code&&" "!==t.key||(this.meridiem=t.target.children[0].value.toLowerCase(),this.setTime({hours:this.hours,minutes:this.minutes,meridiem:this.meridiem}))};handleWheel=t=>{t.deltaY&&(t.preventDefault(),t.target.focus(),"pickerHours"===t.target.name?this.#p(t.deltaY>0,t.deltaY<0):this.#f(t.deltaY>0,t.deltaY<0))};#m(){this.isWheelSpin&&[this.hoursInputEl,this.minutesInputEl].forEach((t=>t.addEventListener("wheel",this.handleWheel)))}#p(t,e){if(t&&(this.hours+=1),e&&(this.hours-=1),24===this.clock)this.hours<0&&(this.hours=23),this.hours>23&&(this.hours=0);else 0===this.hours&&(this.hours=12),this.hours>12&&(this.hours=1);this.setTime({hours:this.hours,minutes:this.minutes,meridiem:this.meridiem})}#f(t,e){if(t&&(this.minutes+=this.minuteSteps),e&&(this.minutes-=this.minuteSteps),this.minutes<0)if(this.minutes=60-this.minuteSteps,24===this.clock)0===this.hours&&(this.hours=24),this.hours-=1;else 1===this.hours&&(this.hours=12),this.hours-=1;if(this.minutes>60-this.minuteSteps)if(this.minutes=0,24===this.clock)23===this.hours&&(this.hours=0),this.hours+=1;else 12===this.hours&&(this.hours=0),this.hours+=1;this.setTime({hours:this.hours,minutes:this.minutes,meridiem:this.meridiem})}#h(){const t=(new Date).getTimezoneOffset(),e=Math.floor(Math.abs(t)/60),i=Math.abs(t)%60;return`${t<=0?"+":"-"}${String(e).padStart(2,"0")}:${String(i).padStart(2,"0")}`}get time(){return this.#c}}class Lt{#t;#e;#d={animation:"drop",arrow:!0,clock:12,minuteSteps:1,offset:{left:0,top:2},theme:"light",time:{hours:12,minutes:0,meridiem:"am"},upDownKeys:!0,wheelSpin:!0};static pickers=0;#w;#c;constructor(t,e){this.#t=t,(t=>{if(!t)throw new Error("element is not defined");if("INPUT"!==t.tagName||"text"!==t.type)throw new Error("element is not an input text element");t.setAttribute("readonly","")})(this.#t),this.#e=e&&(t=>{if("object"!=typeof t||Array.isArray(t))throw new Error("options must be an object");if("animation"in t&&"string"!=typeof t.animation)throw new Error('"animation" property must be of type string');if(t.animation&&""===t.animation.trim())throw new Error('"animation" property must not be an empty string');if("arrow"in t&&"boolean"!=typeof t.arrow)throw new Error('"arrow" property must be of type boolean');if("clock"in t&&"number"!=typeof t.clock)throw new Error('"clock" property must be of type number');if(t.clock&&12!==t.clock&&24!==t.clock)throw new Error('"clock" property only accepts 12/24 as a value');if("minuteSteps"in t&&"number"!=typeof t.minuteSteps)throw new Error('"minuteSteps" property must be of type number');if(t.minuteSteps&&(t.minuteSteps<1||t.minuteSteps>59))throw new RangeError('"minuteSteps" property must range between 1-59');if("offset"in t&&("object"==typeof t.offset||!Array.isArray(t.offset))){if(t.offset?.top&&!Number.isInteger(t.offset.top))throw new Error('"offset.top" must be an integer');if(t.offset?.left&&!Number.isInteger(t.offset.left))throw new Error('"offset.left" must be an integer')}if("theme"in t&&"string"!=typeof t.theme)throw new Error('"theme" property must be of type string');if(t.theme&&""===t.theme.trim())throw new Error('"theme" property must not be an empty string');if("time"in t&&("object"==typeof t.time||!Array.isArray(t.time))){if(t.time?.hours&&!Number.isInteger(t.time.hours))throw new Error('"time.hours" must be an integer');if(t.time?.hours&&(t.time.hours<0||t.time.hours>23))throw new RangeError('"time.hours" property must range between 1-23');if(t.time?.minutes&&!Number.isInteger(t.time.minutes))throw new Error('"time.minutes" must be an integer');if(t.time?.minutes&&(t.time.minutes<0||t.time.minutes>59))throw new RangeError('"time.minutes" property must range between 1-59');if(t.time?.meridiem&&"string"!=typeof t.time.meridiem)throw new Error('"time.meridiem" must be a string');if(t.time?.meridiem&&"am"!==t.time?.meridiem.toLowerCase()&&"pm"!==t.time?.meridiem.toLowerCase())throw new Error('"time.meridiem" value must be am/pm')}if("upDownKeys"in t&&"boolean"!=typeof t.upDownKeys)throw new Error('"upDownKeys" property must be of type boolean');if("wheelSpin"in t&&"boolean"!=typeof t.wheelSpin)throw new Error('"wheelSpin" property must be of type boolean');if(!1===t.upDownKeys&&!1===t.wheelSpin)throw new Error('atleast one of "upDownKeys" OR "wheelSpin" must be true');return!0})(e)?{...this.#d,...e}:this.#d,Lt.pickers++,this.#y(this.#t,this.#e,Lt.pickers),this.#g(),this.#c=new Tt(this.#t,this.#e,this.#w.picker,Lt.pickers)}#y(t,e,i){const n=new St(t,e,i);this.#w=n}#b=()=>{this.#w.picker.classList.add("picktime--active"),this.#w.position(),this.#w.picker.querySelector("input[name=pickerHours]").focus({preventScroll:!0})};#v=t=>{t.target===this.#t||t.target===this.#w.picker||t.target.className.startsWith("picktime")||this.#w.picker.classList.remove("picktime--active")};#g(){this.#t.addEventListener("focus",this.#b),document.addEventListener("mousedown",this.#v)}setTime({hours:t,minutes:e,meridiem:i}){if(t&&!Number.isInteger(t))throw new Error('setTime() "hours" must be an integer');if(t&&(t<0||t>23))throw new RangeError('setTime() "hours" property must range between 1-23');if(e&&!Number.isInteger(e))throw new Error('setTime() "minutes" must be an integer');if(e&&(e<0||e>59))throw new RangeError('setTime() "minutes" property must range between 1-59');if(i&&"string"!=typeof i)throw new Error('setTime() "meridiem" must be a string');if(i&&"am"!==i.toLowerCase()&&"pm"!==i.toLowerCase())throw new Error('setTime() "meridiem" value must be am/pm');this.#c.setTime({hours:t,minutes:e,meridiem:i})}disable(){this.#w.picker.querySelectorAll("input[type=text]").forEach((t=>{t.setAttribute("disabled",""),t.removeEventListener("wheel",this.#c.handleWheel),t.style.pointerEvents="none"})),this.#w.picker.querySelectorAll("input[type=radio]").forEach((t=>{t.removeEventListener("click",this.#c.handleMeridiemClick),t.parentElement.removeEventListener("keydown",this.#c.handleMeridiemKeyDown),t.parentElement.style.pointerEvents="none",t.parentElement.setAttribute("tabindex","-1")}))}enable(){this.#w.picker.querySelectorAll("input[type=text]").forEach((t=>{t.removeAttribute("disabled"),t.addEventListener("wheel",this.#c.handleWheel),t.style.pointerEvents="auto"})),this.#w.picker.querySelectorAll("input[type=radio]").forEach((t=>{t.addEventListener("click",this.#c.handleMeridiemClick),t.parentElement.addEventListener("keydown",this.#c.handleMeridiemKeyDown),t.parentElement.style.pointerEvents="auto",t.parentElement.setAttribute("tabindex",t.parentElement.dataset.tabindex)}))}destroy(){Lt.pickers--,this.#e=this.#d,this.#w.picker.remove(),this.#t.value="",this.#t.removeAttribute("readonly"),this.#t.removeEventListener("focus",this.#b),document.removeEventListener("mousedown",this.#v)}get getTime(){return this.#c.time}}export{Lt as PickTime};
