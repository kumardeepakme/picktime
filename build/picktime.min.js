"use strict";function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}class PickTime{constructor(a,b){var c=Number.isInteger,d=Math.ceil;if(_defineProperty(this,"_defaults",{animation:"drop",clock:12,displayTime:{hour:12,minute:0,meridiem:"am"},format:"hh:mm A",margin:{top:5,left:0},minuteSteps:1,onKeys:!0,onWheel:!0,theme:"light"}),this._element=a,this._options=b,!this._element||1!==this._element.nodeType||"INPUT"!==this._element.nodeName)return this._error("\"element\" not found or invalid");if(this._options&&!this._isObject(this._options))return this._error("\"options\" accept an object");this._options=_objectSpread(_objectSpread({},this._defaults),this._options),this._validateOptions(),this.pickers=++PickTime.pickers,this._element.setAttribute("readonly","");var e=window.pageYOffset+this._element.getBoundingClientRect().top+this._element.offsetHeight+this._options.margin.top,f=window.pageXOffset+this._element.getBoundingClientRect().left+this._options.margin.left;this.picker=document.createElement("div"),this.picker.classList.add("picktime","picktime--".concat(this._options.theme),"picktime--animation-".concat(this._options.animation),"picktime--clock-".concat(this._options.clock)),this.picker.setAttribute("tabindex","-1"),this.picker.style.top="".concat(d(e),"px"),this.picker.style.left="".concat(d(f),"px"),this.picker.innerHTML=this._template("digital",this.pickers),document.querySelector("body").appendChild(this.picker),window.addEventListener("resize",()=>{this._updatePickerPosition(window.pageYOffset+this._element.getBoundingClientRect().top+this._element.offsetHeight+this._options.margin.top,window.pageXOffset+this._element.getBoundingClientRect().left+this._options.margin.left)}),this._element.addEventListener("focus",()=>{this.picker.classList.add("picktime--active"),this.picker.focus()}),this._element.addEventListener("blur",a=>{a.relatedTarget&&!a.relatedTarget.className.startsWith("picktime")&&this.picker.classList.remove("picktime--active")}),document.addEventListener("mousedown",a=>{a.target===this._element||a.target===this.picker||a.target.className.startsWith("picktime")||this.picker.classList.remove("picktime--active")}),this._hour=this._options.displayTime.hour||12,24===this._options.clock&&(this._hour=this._convertTo24(this._options.displayTime.hour,this._options.displayTime.meridiem)||0),this._minute=this._options.displayTime.minute||0,this._meridiem=this._options.displayTime.meridiem||"am",this.inputHour=this.picker.querySelector("input[name=\"pickerHour\"]"),this.inputMinute=this.picker.querySelector("input[name=\"pickerMinute\"]"),this.radioMeridiem=this.picker.querySelectorAll("#pickerMeridiem"),this.inputHour.value=("0"+this._hour).slice(-2),this.inputMinute.value=("0"+this._minute).slice(-2),this.radioMeridiem.value=this._meridiem,this._inputDataset(this._hour,this._minute),[this.inputHour,this.inputMinute].forEach(a=>{a.onkeypress=a=>{if("1"!==a.key&&"2"!==a.key&&"3"!==a.key&&"4"!==a.key&&"5"!==a.key&&"6"!==a.key&&"7"!==a.key&&"8"!==a.key&&"9"!==a.key&&"0"!==a.key)return!1},a.addEventListener("input",()=>{switch(a.name){case"pickerHour":setTimeout(()=>{c(1*a.value)||(a.value=0),12===this._options.clock?12<1*a.value&&(a.value=12):24<1*a.value&&(a.value=24),this.inputHour.value=a.value,this._inputDataset(this.inputHour.value,this.inputMinute.value),this._dispatchChangeEvent(this._element)},0);break;case"pickerMinute":setTimeout(()=>{c(1*a.value)||(a.value=0),59<1*a.value&&(a.value=0),this.inputMinute.value=a.value,this._inputDataset(this.inputHour.value,this.inputMinute.value),this._dispatchChangeEvent(this._element)},0);}}),!0===this._options.onWheel&&a.addEventListener("wheel",a=>this._timeFormation(a,0<a.deltaY,0>a.deltaY)),!0===this._options.onKeys&&a.addEventListener("keydown",a=>this._timeFormation(a,"ArrowUp"===a.key,"ArrowDown"===a.key))}),this.radioMeridiem.forEach(a=>{a.value===this._meridiem&&a.setAttribute("checked",""),a.addEventListener("click",()=>{a.checked&&(this.radioMeridiem.value=a.value),this._dispatchChangeEvent(this._element),this.picker.classList.remove("picktime--active")})})}_error(a){console.error(Error(a))}_isObject(a){return"[object Object]"===Object.prototype.toString.call(a)}_inputDataset(a,b){this.inputHour.dataset.value=a,this.inputMinute.dataset.value=b}_updatePickerPosition(a,b){var c=Math.ceil;this.picker.style.top="".concat(c(a),"px"),this.picker.style.left="".concat(c(b),"px")}_validateOptions(){var a=Number.isInteger;if(""===this._options.animation||"string"!=typeof this._options.animation)return this._error("invalid \"animation\" value");if([this._options.onKeys,this._options.onWheel].forEach(a=>{if(!0!==a&&!1!==a)return a===this._options.onKeys?this._error("invalid \"onKeys\" value"):this._error("invalid \"onWheel\" value")}),0<Object.keys(this._options.displayTime).length&&this._isObject(this._options.displayTime)){if(!this._options.displayTime.hour)this._options.displayTime.hour=12;else if(0>this._options.displayTime.hour||12<this._options.displayTime.hour)throw new RangeError("invalid \"displayTime.hour\" value");if(!this._options.displayTime.minute)this._options.displayTime.minute=0;else if(0>this._options.displayTime.minute||59<this._options.displayTime.minute)throw new RangeError("invalid \"displayTime.minute\" value");if(!this._options.displayTime.meridiem)this._options.displayTime.meridiem="am";else if(""!==this._options.displayTime.meridiem&&"am"!==this._options.displayTime.meridiem&&"pm"!==this._options.displayTime.meridiem)return this._error("invalid \"displayTime.meridiem\" value")}else this._options.displayTime={hour:12,minute:0,meridiem:"am"};if(12!==this._options.clock&&24!==this._options.clock)return this._error("invalid \"clock\" value");if(""!==this._options.format&&!/^(h{1,2}):(m{1,2})\s([a|A]{1})$/g.test(this._options.format))return this._error("invalid \"format\" value");if(0<Object.keys(this._options.margin).length&&this._isObject(this._options.margin)){if(!this._options.margin.top)this._options.margin.top=5;else if(!a(1*this._options.margin.top))return this._error("invalid \"margin.top\" value");if(!this._options.margin.left)this._options.margin.left=0;else if(!a(1*this._options.margin.left))return this._error("invalid \"margin.left\" value")}else this._options.margin={top:5,left:0};if(1>this._options.minuteSteps||60<this._options.minuteSteps)throw new RangeError("invalid \"minuteSteps\" value");return""===this._options.theme||"string"!=typeof this._options.theme?this._error("invalid \"theme\" value"):void 0}_convertTo24(a,b){var c;return c="pm"===b?a+12:a,12===a&&"am"===b&&(c=0),12===a&&"pm"===b&&(c=12),12===a&&""===b&&(c=24),c}_formatTime(a,b,c,d){return /^A$/.test(d.split(" ")[1])&&(c=c.toUpperCase()),d.split(" ")[0].split(":").forEach(c=>{/^h{2}$/.test(c)&&(a=("0"+a).slice(-2)),/^m{2}$/.test(c)&&(b=("0"+b).slice(-2))}),24===this._options.clock?"".concat(a,":").concat(b):"".concat(a,":").concat(b," ").concat(c)}_dispatchChangeEvent(a){a.value=this._formatTime(this.inputHour.dataset.value,this.inputMinute.dataset.value,this.radioMeridiem.value,this._options.format),a.dispatchEvent(new Event("change"),{bubbles:!0})}_timeFormation(a,b,c){switch((b||c)&&a.preventDefault(),a.target.focus(),a.target.name){case"pickerHour":b&&(this._hour+=1),c&&(this._hour-=1),12===this._options.clock?(0===this._hour&&(this._hour=12),12<this._hour&&(this._hour=1)):(0>this._hour&&(this._hour=24),24<this._hour&&(this._hour=0)),this.inputHour.value=("0"+this._hour).slice(-2),this._inputDataset(this._hour,this._minute),this._dispatchChangeEvent(this._element);break;case"pickerMinute":b&&(this._minute+=this._options.minuteSteps),c&&(this._minute-=this._options.minuteSteps),0>this._minute&&(this._minute=60-1*this._options.minuteSteps,12===this._options.clock?(1===this._hour&&(this._hour=12),this._hour-=1):(0===this._hour&&(this._hour=24),this._hour-=1)),this._minute>60-1*this._options.minuteSteps&&(this._minute=0,12===this._options.clock?(12===this._hour&&(this._hour=0),this._hour+=1):(24===this._hour&&(this._hour=0),this._hour+=1)),0<this._minute&&24===this._hour&&(this._hour=0),this.inputMinute.value=("0"+this._minute).slice(-2),this.inputHour.value=("0"+this._hour).slice(-2),this._inputDataset(this._hour,this._minute),this._dispatchChangeEvent(this._element);}}_template(a,b){var c;switch(a){case"digital":default:c="<div class=\"picktime__body\"><div class=\"picktime__box\"><input class=\"picktime__box--input\" type=\"text\" name=\"pickerHour\" maxlength=\"2\" tabindex=\"1\"></div><div class=\"picktime__box\"><div class=\"picktime__box--dots\"><span class=\"picktime__box--dots-dot\"></span><span class=\"picktime__box--dots-dot\"></span></div></div><div class=\"picktime__box\"><input class=\"picktime__box--input\" type=\"text\" name=\"pickerMinute\" maxlength=\"2\" tabindex=\"2\"></div><div class=\"picktime__meridiem\"><label class=\"picktime__meridiem--label\" tabindex=\"3\"><input id=\"pickerMeridiem\" class=\"picktime__meridiem--radio\" type=\"radio\" name=\"pickerMeridiem".concat(b,"\" value=\"am\"><span class=\"picktime__meridiem--span\">AM</span></label><label class=\"picktime__meridiem--label\" tabindex=\"4\"><input id=\"pickerMeridiem\" class=\"picktime__meridiem--radio\" type=\"radio\" name=\"pickerMeridiem").concat(b,"\" value=\"pm\"><span class=\"picktime__meridiem--span\">PM</span></label></div></div>");}return c}}_defineProperty(PickTime,"pickers",0),module.exports=PickTime;
